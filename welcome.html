<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Troppion - Masuk</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #FFA000;
      --primary-hover: #ff8c00;
      --bg: #000;
      --text: #fff;
    }
    * { box-sizing: border-box; }
    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: 'Montserrat', sans-serif;
    }

    /* ===== Z-INDEX MAP (non-negative for cross-browser) =====
       0: stars  | 1: grid | 2: aurora | 3: blobs | 4: particles | 5: grain | 10+: content
    ========================================================== */

    /* ===== Background Layers ===== */
    /* Stars (deep background) */
    #stars-canvas {
      position: fixed; inset: 0; z-index: 0; background: #000;
    }

    /* Animated tech grid */
    .grid {
      position: fixed; inset: 0; z-index: 1; pointer-events: none;
      background:
        linear-gradient(to bottom, rgba(255,255,255,0.06), rgba(0,0,0,0) 60%),
        repeating-linear-gradient(0deg, rgba(255,255,255,0.04) 0 1px, transparent 1px 64px),
        repeating-linear-gradient(90deg, rgba(255,255,255,0.03) 0 1px, transparent 1px 64px);
      transform: translateZ(0);
      animation: grid-pan 40s linear infinite;
    }
    @keyframes grid-pan { 0% { background-position: 0 0, 0 0, 0 0; } 100% { background-position: 0 0, 0 400px, 400px 0; } }

    /* Aurora layer */
    .aurora {
      position: fixed; inset: -20% -10% -10% -10%; z-index: 2; pointer-events: none;
      filter: blur(40px) saturate(120%); opacity: 0.55;
      background: conic-gradient(from 120deg at 30% 20%, rgba(255,160,0,0.35), rgba(255,230,180,0.12), rgba(255,140,0,0.45), rgba(255,160,0,0.35));
      mask-image: radial-gradient(70% 70% at 40% 40%, rgba(0,0,0,0.9) 20%, rgba(0,0,0,0.5) 60%, transparent 100%);
      animation: aurora-flow 22s ease-in-out infinite alternate;
    }
    @keyframes aurora-flow { 0% { transform: translate3d(-3%, -2%, 0) rotate(0deg) scale(1); } 100% { transform: translate3d(3%, 2%, 0) rotate(8deg) scale(1.05); } }

    /* Blobs layer */
    .bg {
      position: fixed; inset: 0; overflow: hidden; z-index: 3;
      background: radial-gradient(1200px 800px at 120% -20%, #1a1a1a 0%, #000 40%);
      will-change: transform;
    }
    .blob {
      position: absolute; width: 50vmax; height: 50vmax; filter: blur(60px); opacity: 0.32;
      background: radial-gradient(circle at 30% 30%, #ffcf70, rgba(255, 160, 0, 0.6), transparent 60%);
      animation: drift 18s linear infinite; mix-blend-mode: screen;
    }
    .blob.b2 { width: 60vmax; height: 60vmax; opacity: 0.26; background: radial-gradient(circle at 55% 45%, #ffd9a1, rgba(255,140,0,0.5), transparent 60%); animation: drift2 24s linear infinite; }
    .blob.b3 { width: 45vmax; height: 45vmax; opacity: 0.22; background: radial-gradient(circle at 50% 50%, #ffae00, rgba(255,180,0,0.45), transparent 60%); animation: drift3 30s linear infinite; }
    @keyframes drift { 0%{transform:translate(-10%,-10%) rotate(0)} 50%{transform:translate(20%,10%) rotate(180deg)} 100%{transform:translate(-10%,-10%) rotate(360deg)} }
    @keyframes drift2{ 0%{transform:translate(50%,-30%) rotate(0)} 50%{transform:translate(20%,30%) rotate(-180deg)} 100%{transform:translate(50%,-30%) rotate(-360deg)} }
    @keyframes drift3{ 0%{transform:translate(-30%,40%) rotate(0)} 50%{transform:translate(0%,-10%) rotate(180deg)} 100%{transform:translate(-30%,40%) rotate(360deg)} }

    /* Interactive particles */
    #bg-canvas { position: fixed; inset: 0; z-index: 4; pointer-events: none; }

    /* Film grain */
    .grain { position: fixed; inset: 0; z-index: 5; pointer-events: none; opacity: 0.06;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.6"/></svg>');
      background-size: 220px 220px; animation: grain-shift 1.8s steps(2) infinite; }
    @keyframes grain-shift { to { transform: translate3d(1%, -1%, 0); } }

    /* ===== Layout / Content ===== */
    .wrap { min-height: 100svh; display: flex; align-items: center; justify-content: center; padding: 24px; perspective: 1000px; position: relative; z-index: 10; }
    .center-content { background: rgba(255,255,255,0.06); padding: 40px 50px; border-radius: 16px; box-shadow: 0 8px 20px rgba(0,0,0,0.5); text-align: center; backdrop-filter: blur(10px); transform-style: preserve-3d; transition: transform 200ms ease, box-shadow 200ms ease; will-change: transform; animation: card-in 700ms cubic-bezier(.2,.7,.2,1) both; }
    @keyframes card-in { from { opacity: 0; transform: translateY(8px) scale(.98); } to { opacity: 1; transform: translateY(0) scale(1); } }
    .center-content:hover { box-shadow: 0 12px 28px rgba(0,0,0,0.6); }
    .center-content h1 { font-size: clamp(28px, 5vw, 48px); font-weight: 800; letter-spacing: 2px; margin: 0 0 20px; transform: translateZ(30px); }
    .btn-masuk { position: relative; display: inline-block; padding: clamp(10px, 2vw, 12px) clamp(20px, 4vw, 28px); font-size: clamp(16px, 2.5vw, 18px); font-weight: 700; background-color: var(--primary); color: #ffffff; border: none; border-radius: 12px; text-decoration: none; cursor: pointer; transition: background 0.2s ease, transform 0.15s ease, box-shadow 0.2s ease; transform: translateZ(40px); box-shadow: 0 6px 0 rgba(0,0,0,0.25); overflow: hidden; isolation: isolate; }
    .btn-masuk:hover,.btn-masuk:focus-visible { background-color: var(--primary-hover); transform: translateY(-2px) translateZ(40px); box-shadow: 0 10px 16px rgba(0,0,0,0.35); }
    .btn-masuk:focus-visible { outline: 2px solid #fff; outline-offset: 3px; }
    .btn-masuk span.ripple { position: absolute; inset: 0; pointer-events: none; background: radial-gradient(circle, rgba(255,255,255,.35) 10%, rgba(255,255,255,0) 60%); transform: translate(-50%,-50%) scale(0); border-radius: 50%; width: 10px; height: 10px; opacity: 0; transition: transform .5s ease, opacity .6s ease; }

    /* ===== Reduced Motion ===== */
    @media (prefers-reduced-motion: reduce) {
      .grid { animation-duration: 80s; }
      .aurora { animation-duration: 44s; }
      .blob { animation-duration: 36s; }
      .grain { animation: none; }
    }
  </style>
</head>
<body>
  <!-- Background Stack -->
  <canvas id="stars-canvas" aria-hidden="true"></canvas>
  <div class="grid" aria-hidden="true"></div>
  <div class="aurora" aria-hidden="true"></div>
  <div class="bg" aria-hidden="true">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>
  </div>
  <canvas id="bg-canvas" aria-hidden="true"></canvas>
  <div class="grain" aria-hidden="true"></div>

  <!-- Konten Tengah -->
  <main class="wrap">
    <div class="center-content" id="card">
      <h1>TROPPION</h1>
      <a href="Beranda.html" class="btn-masuk" id="cta">Masuk</a>
    </div>
  </main>

  <!-- Stars layer script -->
  <script>
    (function(){
      const canvas = document.getElementById('stars-canvas');
      const ctx = canvas.getContext('2d');
      const DPR = Math.min(window.devicePixelRatio || 1, 2);
      let w, h, stars = [], countBase = 200; // can scale down for reduced motion
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      function resize() {
        w = window.innerWidth; h = window.innerHeight;
        canvas.width = Math.floor(w * DPR); canvas.height = Math.floor(h * DPR);
        canvas.style.width = w + 'px'; canvas.style.height = h + 'px';
        ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
        stars = [];
        const count = Math.min(countBase, Math.round((w * h) / 14000));
        for (let i = 0; i < count; i++) {
          stars.push({ x: Math.random()*w, y: Math.random()*h, r: Math.random()*1.2+0.4, tw: Math.random()*100, speed: 0.02 + Math.random()*0.06 });
        }
      }
      function draw() {
        ctx.clearRect(0,0,w,h); ctx.fillStyle='#fff';
        for (let s of stars) {
          s.tw += 0.03 + s.speed * 0.5; const opacity = 0.55 + Math.sin(s.tw) * 0.45;
          ctx.globalAlpha = opacity; ctx.beginPath(); ctx.arc(s.x, s.y, s.r, 0, Math.PI*2); ctx.fill(); ctx.closePath(); ctx.globalAlpha = 1;
          s.y += s.speed; if (s.y > h + 2) { s.y = -2; s.x = Math.random()*w; }
        }
        requestAnimationFrame(draw);
      }
      if (prefersReduced) countBase = 120;
      window.addEventListener('resize', () => requestAnimationFrame(resize));
      resize(); requestAnimationFrame(draw);
    })();
  </script>

  <!-- Particles + interaksi -->
  <script>
    (function() {
      const canvas = document.getElementById('bg-canvas');
      const ctx = canvas.getContext('2d');
      const DPR = Math.min(window.devicePixelRatio || 1, 2);
      let w, h, particles = []; let targetBase = 140;
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduced) targetBase = 90;
      const MOUSE = { x: -9999, y: -9999, active: false };

      function resize() {
        w = window.innerWidth; h = window.innerHeight;
        canvas.width = Math.floor(w * DPR); canvas.height = Math.floor(h * DPR);
        canvas.style.width = w + 'px'; canvas.style.height = h + 'px';
        ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
        const target = Math.min(targetBase, Math.round((w * h) / 17000));
        if (particles.length === 0) particles = createParticles(target);
        else if (particles.length < target) particles.push(...createParticles(target - particles.length));
        else if (particles.length > target) particles.length = target;
      }
      function createParticles(n){ const arr=[]; for (let i=0;i<n;i++){ arr.push({ x:Math.random()*w, y:Math.random()*h, vx:(Math.random()-.5)*.5, vy:(Math.random()-.5)*.5, r: Math.random()*1.6+.6 }); } return arr; }
      function step(){
        ctx.clearRect(0,0,w,h);
        const grd = ctx.createRadialGradient(w*.5, h*.4, h*.05, w*.5, h*.5, Math.max(w,h)*.8);
        grd.addColorStop(0,'rgba(255,160,0,0.04)'); grd.addColorStop(1,'rgba(0,0,0,0)'); ctx.fillStyle=grd; ctx.fillRect(0,0,w,h);
        for (let p of particles){
          if (MOUSE.active){ const dx=p.x-MOUSE.x, dy=p.y-MOUSE.y, d2=dx*dx+dy*dy, radius=120; if (d2<radius*radius){ const d=Math.max(Math.sqrt(d2),.001); const f=(radius-d)/radius; p.vx += (dx/d)*f*.45; p.vy += (dy/d)*f*.45; } }
          p.x+=p.vx; p.y+=p.vy; p.vx*=.98; p.vy*=.98;
          if (p.x<-10) p.x=w+10; if (p.x>w+10) p.x=-10; if (p.y<-10) p.y=h+10; if (p.y>h+10) p.y=-10;
          ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.closePath(); ctx.fillStyle='rgba(255,200,120,0.9)'; ctx.fill();
        }
        for (let i=0;i<particles.length;i++){ const p1=particles[i]; for (let j=i+1;j<particles.length;j++){ const p2=particles[j]; const dx=p1.x-p2.x, dy=p1.y-p2.y, d2=dx*dx+dy*dy; if (d2<85*85){ const a=1-Math.sqrt(d2)/85; ctx.globalAlpha=a*.35; ctx.beginPath(); ctx.moveTo(p1.x,p1.y); ctx.lineTo(p2.x,p2.y); ctx.strokeStyle='rgba(255,168,0,1)'; ctx.lineWidth=1; ctx.stroke(); ctx.globalAlpha=1; } } }
        requestAnimationFrame(step);
      }
      window.addEventListener('pointermove', (e)=>{ MOUSE.x=e.clientX; MOUSE.y=e.clientY; MOUSE.active=true; }, {passive:true});
      window.addEventListener('pointerleave', ()=>{ MOUSE.active=false; });
      window.addEventListener('click', ()=>{ for (let k=0;k<Math.min(18,particles.length);k++){ const p=particles[(Math.random()*particles.length)|0]; const ang=Math.random()*Math.PI*2; const sp=2+Math.random()*2.5; p.vx+=Math.cos(ang)*sp; p.vy+=Math.sin(ang)*sp; } });
      window.addEventListener('resize', () => requestAnimationFrame(resize));
      resize(); requestAnimationFrame(step);
    })();
  </script>

  <!-- Card tilt + parallax + ripple -->
  <script>
    (function(){
      const card = document.getElementById('card');
      const bgLayer = document.querySelector('.bg'); // parallax pada container, bukan tiap blob (agar tidak bentrok animasi)
      const MAX_TILT = 8; let bounds = null;
      function updateBounds(){ bounds = card.getBoundingClientRect(); }
      updateBounds(); window.addEventListener('resize', () => requestAnimationFrame(updateBounds));
      window.addEventListener('pointermove', (e) => {
        if (!bounds) return;
        const relX = (e.clientX - bounds.left) / bounds.width;  // 0..1
        const relY = (e.clientY - bounds.top) / bounds.height;   // 0..1
        const rotY = (relX - 0.5) * (MAX_TILT * 2);
        const rotX = (0.5 - relY) * (MAX_TILT * 2);
        card.style.transform = `rotateX(${rotX.toFixed(2)}deg) rotateY(${rotY.toFixed(2)}deg)`;
        // Parallax: gerakkan container blob sedikit
        const mx = (e.clientX / window.innerWidth - 0.5);
        const my = (e.clientY / window.innerHeight - 0.5);
        if (bgLayer) bgLayer.style.transform = `translate(${mx*12}px, ${my*12}px)`;
      });
      window.addEventListener('pointerleave', () => { card.style.transform = 'rotateX(0deg) rotateY(0deg)'; if (bgLayer) bgLayer.style.transform = 'translate(0,0)'; });

      // Ripple on CTA
      const cta = document.getElementById('cta');
      cta.addEventListener('click', (e)=>{
        const rect = cta.getBoundingClientRect();
        const span = document.createElement('span'); span.className = 'ripple';
        const size = Math.max(rect.width, rect.height) * 1.6;
        span.style.width = span.style.height = size + 'px';
        span.style.left = (e.clientX - rect.left) + 'px'; span.style.top  = (e.clientY - rect.top) + 'px';
        cta.appendChild(span);
        requestAnimationFrame(()=>{ span.style.opacity = '1'; span.style.transform = 'translate(-50%,-50%) scale(1)'; });
        setTimeout(()=> span.remove(), 600);
      });
    })();
  </script>
</body>
</html>
